# エレベータアルゴリズム

- どうしてエレベータが通過しちゃうの？
  - ビルの 3 階にいる人がエレベーターの乗り口で下降ボタン(↓)を押したとします。1 階にいたカゴが上昇を始めましたが、3 階を通過して、上の階に行ってしまいました。このエレベータが以下のアルゴリズムで動作していたからです。
    - 上昇中はより上の階で降りる人やより上の階で待っている人が居る限り、上昇を続ける。
    - 下降中はより下の階でで降りる人やより下の階で待っている人が居る限り、下降を続ける。

## シミュレートするエレベータの仕様

- ビルは 5 階建
- エレベータ: 1 基
- カゴの中には降りる階を指定する、1、2、3、4、5 というボタンがあり、[開]と[閉]のボタンはこれから作るアプリでは省略します。
- 各階の乗り口には上昇を指定する[↑]ボタンと下降を指定する[↓]ボタンがあります。ただし、1 階は[↑]ボタンのみで、5 階は[↓]ボタンのみとします。
- <img width="557" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/32feec96-8c62-4773-b4ec-a8d16a118836">


## 問題

- direction_control 関数:
  - カゴの移動方向を設定する。
  - 「現在の移動方向」「より上の階のボタンが押されているか」「より下の階のボタンが押されているか」という複数の条件に応じて、現在の移動方向を[未定][上昇][下降]のいずれかに変更する動作を行う。
  - 複数の条件の組み合わせには decision table(決定表)を書くと良い。
  - <img width="945" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/058ab5c3-6df2-489f-953b-d38725f5268a">

- door_control 関数:
  - 扉を開く
  - カゴ内のボタンをで処理を行う場合: 現在位置のカゴ内のボタンが押されているかという条件が True なら、扉を開いてボタンの選択を解除する。
  - 各階の[↑][↓]ボタンで処理を行う場合:
    - 「現在位置で上昇ボタンが押されているか」「現在位置で下降ボタンが押されているか」「現在の移動方向」という条件の組み合わせで decision table を作成する。
    - <img width="572" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/c5e00f1f-52a0-47f2-9696-075cb9e011c3">

- cage_control 関数: カゴを移動する
  - 現在の移動方向が上昇でかつ現在位置<最上階なら「カゴを 1 つ上に進める」
  - 現在の移動方向が下降かつ現在位置>最下階なら「カゴを 1 つ下に進める」
  - どちらでもない(カゴの移動を行えない)なら「行き先ボタンを押してください」というメッセージを表示する

## 条件

- 本章のメールアドレス判定ルール:
  - 「ローカル部@ホスト部」という形式である
  - 「ローカル部」と「ホスト部」では大小の英字、数字、ドットが使える
  - ドットは先頭と末尾以外であり、2 個以上連続して使わない

## 出力例

```
kasamayoshiki@kasamakichitakanoMacBook-Pro NikkeiSW % python emailcheck1.py
文字列-->kasama.yoshiki@gmail.com
メールアドレスです。
kasamayoshiki@kasamakichitakanoMacBook-Pro NikkeiSW %
```

## アルゴリズム

### 参考画像

- <img width="867" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/834c968e-0f4d-4c4c-b450-be078ce418ef">
- <img width="538" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/639fcf08-d6ec-48a5-931a-7b723cf0271a">

### tips

- python では re モジュールを用いて文字列が形式あっているか簡単に判定できますが、ここではアルゴリズムを理解するために re モジュールを使わずに手作りします。
- python には isalnum 関数が用意されていますがあえて手作りします。

- 大文字のアルファベットは ASCII コードで連続的に配置されています。ASCII コードでは大文字の "A" から "Z" までの文字は、それぞれ 10 進数で 65 から 90 までの値に対応しています。
  - Python の文字列比較では、文字列が ASCII コードの数値として比較されます。例えば、文字列 "A" は文字 "A" の ASCII コードである 65 よりも小さい文字列として判断されます。
  - したがって、"A" <= input_char <= "Z" の条件は、与えられた文字 input_char が文字列 "A" から "Z" の範囲内にあるかどうかをチェックします。具体的には、input_char の ASCII コードが文字 "A" の ASCII コード（65）以上かつ文字 "Z" の ASCII コード（90）以下であるかどうかを確認します。

## 発展系

- プログラムの可読性が低くなる場合は、マジックナンバーに定数を割り当てる。
- 郵便番号や電話番号などの形式をチェックするプログラムも試して見てね。

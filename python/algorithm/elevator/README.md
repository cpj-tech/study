# エレベータアルゴリズム

- どうしてエレベータが通過しちゃうの？
  - ビルの 3 階にいる人がエレベーターの乗り口で下降ボタン(↓)を押したとします。1 階にいたカゴが上昇を始めましたが、3 階を通過して、上の階に行ってしまいました。このエレベータが以下のアルゴリズムで動作していたからです。
    - 上昇中はより上の階で降りる人やより上の階で待っている人が居る限り、上昇を続ける。
    - 下降中はより下の階でで降りる人やより下の階で待っている人が居る限り、下降を続ける。

## シミュレートするエレベータの仕様

- ビルは 5 階建
- エレベータ: 1 基
- カゴの中には降りる階を指定する、1、2、3、4、5 というボタンがあり、[開]と[閉]のボタンはこれから作るアプリでは省略します。
- 各階の乗り口には上昇を指定する[↑]ボタンと下降を指定する[↓]ボタンがあります。ただし、1 階は[↑]ボタンのみで、5 階は[↓]ボタンのみとします。
- <img width="557" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/32feec96-8c62-4773-b4ec-a8d16a118836">

## 問題

- <img width="500" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/8ef9bbdd-39ec-4c0f-a2d0-fdf921d100f8">

  - カゴが 1F にあり、移動方向が未定でカゴ内の 5 ボタンと各階のボタンの 3F の[↓]ボタンが押されている。
  - 次の動作ボタンをクリックするとエレベータが上昇する、下降する、扉を開く、止まる、などの動作の 1 つずつに行い、画面が変化していく。
  - 扉が開いた時には、「扉を開きました。」というメッセージボックスを表示し、
  - [次の動作]ボタンがクリックされてもカゴの移動ができない時は「行先ボタンを押してください。」というメッセージボックスを表示する。

- direction_control 関数:

  - カゴの移動方向を設定する。
  - 「現在の移動方向」「より上の階のボタンが押されているか」「より下の階のボタンが押されているか」という複数の条件に応じて、現在の移動方向を[未定][上昇][下降]のいずれかに変更する動作を行う。
  - 複数の条件の組み合わせには decision table(決定表)を書くと良い。
  - <img width="945" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/058ab5c3-6df2-489f-953b-d38725f5268a">

- door_control 関数:

  - 扉を開く
  - カゴ内のボタンをで処理を行う場合: 現在位置のカゴ内のボタンが押されているかという条件が True なら、扉を開いてボタンの選択を解除する。
  - 各階の[↑][↓]ボタンで処理を行う場合:
    - 「現在位置で上昇ボタンが押されているか」「現在位置で下降ボタンが押されているか」「現在の移動方向」という条件の組み合わせで decision table を作成する。
    - <img width="572" alt="image" src="https://github.com/cpj-tech/study/assets/61643054/c5e00f1f-52a0-47f2-9696-075cb9e011c3">

- cage_control 関数: カゴを移動する
  - 現在の移動方向が上昇でかつ現在位置<最上階なら「カゴを 1 つ上に進める」
  - 現在の移動方向が下降かつ現在位置>最下階なら「カゴを 1 つ下に進める」
  - どちらでもない(カゴの移動を行えない)なら「行き先ボタンを押してください」というメッセージを表示する

### tips

## 発展系
